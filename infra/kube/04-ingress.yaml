# source https://docs.ovh.com/au/en/kubernetes/installing-nginx-ingress/

  apiVersion: networking.k8s.io/v1
  kind: Ingress
  metadata:
    name: ingress-basegun
    namespace: basegun
    annotations:
      cert-manager.io/issuer: "letsencrypt-preprod"
  spec:
    ingressClassName: nginx
    rules:
      - host: preprod.basegun.fr
        http:
          paths:
            - backend:
                service:
                  name: basegun-frontend
                  port:
                    number: 80
              path: /
              pathType: Prefix
    tls:
    - hosts:
      - preprod.basegun.fr
      secretName: letsencrypt-preprod

# example without DNS
# apiVersion: networking.k8s.io/v1
# kind: Ingress
# metadata:
#   annotations:
#     kubernetes.io/ingress.class: nginx
#   name: ingress
#   namespace: basegun
# spec:
#   rules:
#   - http:
#       paths:
#       - backend:
#           service:
#             name: basegun-frontend
#             port:
#               number: 80
#         path: /
#         pathType: Prefix